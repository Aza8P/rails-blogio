<div class="container" id="app">
  <div class="row align-items-center">
    <div class="col-sm-6">
      <h1> <%= @articles.total_count %> Articles </h1>
    </div>
    <div class="col-sm-6" id="search-form">
      <%= form_tag articles_path, method: :get do %>
        <div class="input-group">
          <%= text_field_tag :query, params[:query], class: "form-control", placeholder: "Search articles" %>
          <div class="input-group-append">
            <%= button_tag(type: :submit, class: "btn btn-outline-secondary") do %>
              <i class="fas fa-search"></i>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
  <br>
  <br>

  <div id="articles">
    <table class="table">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Title</th>
          <th scope="col">Views Count</th>
          <th scope="col">Author</th>
          <th scope="col">Publish Date</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        <% @articles.each_with_index do |article, index| %>
        <tr>
          <th scope="row"><%= (@articles.current_page - 1) * @articles.limit_value + index + 1 %></th>
          <td><%= article.title %></td>
          <td><%= article.readings %></td>
          <td><%= article.user.username %></td>
          <td><%= article.published_at%></td>
          <td>
            <div class="buttons">
              <%= link_to article_path(article), style: "text-decoration: none;", class: "btn btn-link" do %>
                <i class="fas fa-eye"></i> Show
              <% end %>
              <% if user_signed_in? && current_user == article.user %>
                <%= link_to edit_article_path(article), style: "text-decoration: none;", class: "btn btn-link" do %>
                <i class="fas fa-edit"></i> Edit
                <% end %>
                <%= link_to article_path(article), style: "text-decoration: none;", data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}, class: "btn btn-link" do %>
                  <i class="fas fa-trash"></i> Delete
                <% end %>
              <% end %>
            </div>
          </td>
        </tr>
      <% end %>
    </tbody>
    </table>
    <br>
    <%= paginate @articles %>
  </div>
</div>